<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‹›æå‡ªæ–—å¯¹è¯è°ƒè¯•</title>
</head>
<body>
    <h1>ç‹›æå‡ªæ–—å¯¹è¯è°ƒè¯•å·¥å…·</h1>
    <div id="debug-info"></div>
    
    <script>
        // æ¨¡æ‹Ÿgame.jsä¸­çš„ç›¸å…³é€»è¾‘
        class DebugGame {
            constructor() {
                this.gameState = {
                    isSpecialUser: false,
                    specialUserType: null,
                    characterName: null,
                    characterId: null
                };
            }
            
            checkSpecialName(name) {
                const danganronpaCharacters = {
                    'ç‹›æå‡ªæ–—': 'nagito'
                };
                
                if (danganronpaCharacters[name]) {
                    this.gameState.isSpecialUser = true;
                    this.gameState.specialUserType = 'danganronpa';
                    this.gameState.characterName = name;
                    this.gameState.characterId = danganronpaCharacters[name];
                    console.log('æ£€æµ‹åˆ°å¼¹ä¸¸è®ºç ´è§’è‰²:', name);
                    return true;
                }
                return false;
            }
            
            getDanganronpaResponse(characterName, characterId) {
                const responses = {
                    'nagito': `ç‹›æåŒå­¦ï¼Œæ˜¯ä½ å•Šã€‚ä½ æ˜¨å¤©å¥½åƒæ²¡æœ‰æ¥å­¦æ ¡ï¼Œæ˜¯å‡ºäº†ä»€ä¹ˆäº‹äº†å—ï¼Ÿ`
                };
                return responses[characterId] || 'é»˜è®¤å›å¤';
            }
            
            processSpecialResponse(originalText) {
                if (this.gameState.isSpecialUser && 
                    this.gameState.specialUserType === 'danganronpa') {
                    if (this.gameState.characterId === 'nagito') {
                        console.log('ğŸ¯ ç‹›æå‡ªæ–—ï¼šæ˜¾ç¤ºåŸä½œé—®å€™è¯­');
                        return this.getDanganronpaResponse(this.gameState.characterName, this.gameState.characterId);
                    }
                }
                return originalText;
            }
        }
        
        // è°ƒè¯•æµ‹è¯•
        const game = new DebugGame();
        const debugInfo = document.getElementById('debug-info');
        
        function runTest() {
            debugInfo.innerHTML = '<h2>è°ƒè¯•ç»“æœ</h2>';
            
            // æµ‹è¯•è¾“å…¥"ç‹›æå‡ªæ–—"
            const input = 'ç‹›æå‡ªæ–—';
            debugInfo.innerHTML += `<p><strong>è¾“å…¥ï¼š</strong> ${input}</p>`;
            
            // æ£€æŸ¥ç‰¹æ®Šåå­—
            const detected = game.checkSpecialName(input);
            debugInfo.innerHTML += `<p><strong>æ£€æµ‹ç»“æœï¼š</strong> ${detected}</p>`;
            debugInfo.innerHTML += `<p><strong>æ¸¸æˆçŠ¶æ€ï¼š</strong></p>`;
            debugInfo.innerHTML += `<ul>
                <li>isSpecialUser: ${game.gameState.isSpecialUser}</li>
                <li>specialUserType: ${game.gameState.specialUserType}</li>
                <li>characterName: ${game.gameState.characterName}</li>
                <li>characterId: ${game.gameState.characterId}</li>
            </ul>`;
            
            // å¤„ç†ç‰¹æ®Šå›å¤
            const response = game.processSpecialResponse('åŸå§‹æ–‡æœ¬');
            debugInfo.innerHTML += `<p><strong>æœ€ç»ˆå›å¤ï¼š</strong> ${response}</p>`;
            
            // éªŒè¯ç¬¬613è¡Œçš„å†…å®¹
            const nagito613 = game.getDanganronpaResponse('ç‹›æå‡ªæ–—', 'nagito');
            debugInfo.innerHTML += `<p><strong>ç¬¬613è¡Œå†…å®¹ï¼š</strong> ${nagito613}</p>`;
        }
        
        // è‡ªåŠ¨è¿è¡Œæµ‹è¯•
        runTest();
    </script>
</body>
</html>