# Kurose Sumi Galgame 剧本编写指南

## 📚 文件说明

- `script.json` - 默认剧本（简单示例）
- `story_template.json` - 完整故事模板（推荐使用）
- 你可以创建多个剧本文件

## 🎭 剧本结构

### 基本信息
```json
{
  "title": "故事标题",
  "description": "故事描述",
  "author": "作者名",
  "version": "1.0"
}
```

### 角色定义
```json
"characters": {
  "sumi": {
    "name": "Kurose Sumi",
    "sprites": {
      "normal": "sumi_normal.png",
      "smile": "sumi_smile.png",
      "sad": "sumi_sad.png"
    }
  }
}
```

### 背景定义
```json
"backgrounds": {
  "sunset": "IMG_3350.PNG",
  "classroom": "classroom.png"
}
```

## 🎬 场景类型

### 1. 对话场景
```json
{
  "id": 1,
  "type": "dialog",
  "speaker": "Kurose Sumi",
  "character": "sumi",
  "sprite": "smile",
  "position": "right",
  "text": "你好！很高兴见到你～",
  "background": "sunset"
}
```

### 2. 旁白场景
```json
{
  "id": 2,
  "type": "narration",
  "speaker": "旁白",
  "text": "夕阳西下，你来到了这个美丽的地方...",
  "background": "sunset"
}
```

### 3. 选择分支
```json
{
  "id": 3,
  "type": "choice",
  "speaker": "Kurose Sumi",
  "character": "sumi",
  "sprite": "normal",
  "text": "你想做什么？",
  "choices": [
    {
      "text": "选项1",
      "next": 4,
      "affection": "+1"
    },
    {
      "text": "选项2", 
      "next": 5
    }
  ]
}
```

### 4. 场景切换
```json
{
  "id": 4,
  "type": "scene_change",
  "title": "第二章：新的开始",
  "background": "classroom"
}
```

### 5. 故事结尾
```json
{
  "id": 5,
  "type": "ending",
  "speaker": "旁白",
  "text": "故事结束了...",
  "background": "sunset"
}
```

## 🎨 立绘系统

### 角色位置
- `"right"` - 右侧
- `"left"` - 左侧  
- `"center"` - 居中

### 表情文件命名
- `角色名_表情.png`
- 例如：`sumi_normal.png`, `sumi_smile.png`

### 文件放置
- 立绘：`assets/characters/`
- 背景：`assets/backgrounds/`

## 🎮 使用方法

### 1. 编写剧本
复制 `story_template.json` 并修改内容

### 2. 添加资源
将图片放入对应文件夹

### 3. 测试剧本
浏览器控制台输入：
```javascript
game.loadStory("你的剧本.json")
```

### 4. 切换到模板
```javascript
game.loadTemplate()
```

## 💡 编写技巧

1. **ID顺序**：场景ID要连续，便于跳转
2. **分支设计**：用不同ID实现多条故事线
3. **角色表情**：根据对话内容选择合适表情
4. **背景切换**：重要情节可以切换背景
5. **选择影响**：可以添加好感度等数值变化

## 🚀 高级功能

### 条件跳转
```json
{
  "condition": "affection >= 5",
  "next": 10
}
```

### 音效支持（预留）
```json
{
  "sound": "click.mp3",
  "music": "bgm.mp3"
}
```

## 📖 示例剧本

参考 `story_template.json` 查看完整示例，包含：
- 多个选择分支
- 角色表情变化
- 背景场景切换
- 完整的故事线

开始创作你的Galgame故事吧！ 🎭✨